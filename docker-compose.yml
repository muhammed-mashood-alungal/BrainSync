
services:
  backend:
   build:
    context: ./backend
    dockerfile: Dockerfile
   ports:
    - "5000:5000"
   env_file:
    - ./backend/.env
  
   depends_on:
    - mongo
   volumes:
    - ./backend:/usr/src/app
    - /usr/src/app/node_modules

   networks:
    - app-network
  
  frontend:
   build:
    context : ./frontend
    dockerfile : Dockerfile
   ports:
    - "3000:3000"
   env_file:
    - ./frontend/.env.local
   depends_on:
    - backend
   volumes:
    - ./frontend:/usr/src/app
    - /usr/src/app/node_modules
    - /usr/src/app/.next
   environment:
    - NEXT_PUBLIC_API_BASE_URL=http://backend:5000
   networks:
   - app-network
  
  mongo:
   image: mongo:latest
   ports:
    - "27017:27017"
   volumes:
    - mongo_data:/data/db
   networks:
    - app-network

volumes:
 mongo_data:

networks:
  app-network:
    driver: bridge

